<div class="country-list">
  <div class="header px-4">
    <div class="d-flex justify-content-between">
      <div></div>
      <div>
        <h2>{{ continent }} - 國家列表</h2>
        <div>計數：{{ count }}</div>
      </div>
      <div class="d-flex flex-wrap align-content-center">
        <select
          class="form-select me-2"
          [(ngModel)]="selectedSubregion"
          (change)="onSubregionChange()"
          style="width: auto"
        >
          <option *ngFor="let subregion of subregions" [value]="subregion">
            {{
              subregion === "all"
                ? "所有地區"
                : getSubregionTranslation(subregion)
            }}
          </option>
        </select>
        <button class="btn btn-primary" routerLink="/">回首頁</button>
      </div>
    </div>
  </div>
  <div class="card-container">
    <div class="card" *ngFor="let country of filteredCountries">
      <div class="card-inner">
        <div class="card-front">
          <div class="card-front-img">
            <img [src]="country.flags.svg" alt="Flag" />
          </div>
          <h5>
            {{
              country.translations?.zho?.common ??
                country.translations?.jpn?.common
            }}
            ({{ country.name.common }})
          </h5>
          <span
            class="tags"
            [style.background-color]="getSubregionColor(country.subregion)"
            >{{ getSubregionTranslation(country.subregion) }}</span
          >
        </div>
        <div class="card-back">
          <div class="p-3">
            <p class="mb-1"><strong>首都:</strong> {{ country.capital?.[0] || '無' }}</p>
            <p class="mb-1"><strong>人口:</strong> {{ country.population | number }}</p>
            <p class="mb-1"><strong>語言:</strong> {{ getLanguages(country.languages) }}</p>
            <p class="mb-1"><strong>洲份:</strong> {{ getSubregionTranslation(country.subregion) }}</p>
            <a [href]="getWikiLink(country)" target="_blank" class="btn btn-sm btn-info mt-2" (click)="$event.stopPropagation()">
              維基百科
            </a>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
